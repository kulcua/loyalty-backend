<box-loader loading="RequestCtrl.loaderStates.coverLoader" cover="1" class="cover" delay="1000"></box-loader>

<div class="heading" >
    <h1>Yêu cầu hỗ trợ</h1>
</div>
<div style="clear:both;"></div>

<div class="client-list box">
    <div class="box-title">
        <h1 class="text-left">Danh sách yêu cầu hỗ trợ</h1>
    </div>
    <div class="box-content">
        <box-loader loading="RequestCtrl.loaderStates.requestList"></box-loader>
        <table ng-table="RequestCtrl.tableParams" class="default" template-pagination="templatePagination.html">
            <tr ng-repeat="row in RequestCtrl.testRequest">
                <td data-title="'Tên khách hàng'" sortable="'senderName'">
                    <span ng-bind="row.senderName"></span>
                </td>
                <td data-title="'Số điện thoại'" sortable="'senderPhone'">
                    <span ng-bind="row.senderPhone "></span>
                </td>
                <td data-title="'Vấn đề'" sortable="'problemType'">
                    <span ng-bind="row.problemType"></span>
                </td>
                <td data-title="'Mô tả'">
                    <span ng-bind="row.description"></span>
                </td>
                <td data-title="'Trạng thái'" sortable="'active'">
                    <span ng-show="RequestCtrl.AuthService.hasPermission('EARNING_RULE', 'MODIFY')">
                        <button ng-if="row.active" class="tiny button button-septenary-colorized"
                            ng-click="RequestCtrl.setLevelState(!row.active, row.id)">
                            {{'global.active'|translate}}
                        </button>
                        <button ng-if="!row.active" class="tiny button button-default"
                            ng-click="RequestCtrl.setLevelState(!row.active, row.id)">
                            {{'global.inactive'|translate}}
                        </button>
                    </span>
                    <span ng-show="!RequestCtrl.AuthService.hasPermission('EARNING_RULE', 'MODIFY')">
                        <span ng-if="row.active">
                            {{'global.active'|translate}}
                        </span>
                        <span ng-if="!row.active">
                            {{'global.inactive'|translate}}
                        </span>
                    </span>
                </td>
                <td data-title="'Chi tiết'">

                    <a class="tiny button button-primary" data-modal-id="{{row.id}}"
                        ng-click="RequestCtrl.testRequest[$index].showModal=true">
                        {{ "global.show" | translate }}
                    </a>
                </td>
            </tr>
        </table>
    </div>
</div>

<modal ng-repeat="test in RequestCtrl.testRequest" show='RequestCtrl.testRequest[$index].showModal' modalId="{{test.id}}">
<div>
    <h1>test.senderName</h1>
</div>
</modal>