<box-loader
  loading="MaintenanceCtrl.loaderStates.coverLoader"
  cover="1"
  class="cover"
  delay="1000"
></box-loader>

<div class="heading" ng-init="MaintenanceCtrl.getData()">
  <h1>Danh sách đăng ký bảo trì</h1>
  <div class="action-buttons">
    <button
      ng-show="MaintenanceCtrl.AuthService.hasPermission('MAINTENANCE', 'MODIFY')"
      class="medium button button-septenary-colorized"
      ui-sref="admin.add-maintenance"
    >
      Thêm mới
    </button>
  </div>
</div>
<div style="clear: both"></div>

<div class="client-list box">
  <div class="box-title">
    <h1 class="text-left">Danh sách đăng ký bảo trì</h1>
  </div>
  <div class="box-content">
    <box-loader
      loading="MaintenanceCtrl.loaderStates.maintenanceList"
    ></box-loader>
    <table
      ng-table="MaintenanceCtrl.tableParams"
      class="default"
      template-pagination="templatePagination.html"
    >
 
      <tr ng-repeat="row in $data">
        <td data-title="'ID'" sortable="'id'">
          <span ng-bind="row.maintenanceId"></span>
        </td>
        <td data-title="'Mã sản phẩm'">
          <span ng-bind="row.productSku"></span>
        </td>
        <td data-title="'Ngày đến'">
          <span ng-bind="row.bookingDate|date: 'yyyy-MM-dd'"></span>
        </td>
        <td data-title="'Thời gian'">
          <span ng-bind="row.bookingTime"></span>
        </td>
        <td data-title="'Trung tâm bảo hành'">
          <span ng-bind="row.warrantyCenter"></span>
        </td>
        <td data-title="'Phí bảo trì'">
          <span ng-bind="row.cost"></span>
        </td>
        <td data-title="'Trạng thái thanh toán'">
          <span ng-bind="row.paymentStatus"></span>
        </td>
        <td data-title="'Ghi chú'">
          <span ng-bind="row.discription"></span>
        </td>
        <td data-title="'Tên khách hàng'">
          <span ng-bind="row.customerData.name"></span>
        </td>
        <td data-title="'Số điện thoại'">
          <span ng-bind="row.customerData.phone"></span>
        </td>

        <td data-title="'Trạng thái'" sortable="'active'">
          <span
            ng-show="MaintenanceCtrl.AuthService.hasPermission('EARNING_RULE', 'MODIFY')"
          >
            <button
              ng-if="row.active"
              class="tiny button button-septenary-colorized"
              ng-click="MaintenanceCtrl.setMaintenanceState(!row.active, row.maintenanceId)"
            >
             Active
            </button>
            <button
              ng-if="!row.active"
              class="tiny button button-default"
              ng-click="MaintenanceCtrl.setMaintenanceState(!row.active, row.maintenanceId)"
            >
             Inactive
            </button>
          </span>
          <span
            ng-show="!MaintenanceCtrl.AuthService.hasPermission('MAINTENANCE', 'MODIFY')"
          >
            <span ng-if="row.active">active </span>
            <span ng-if="!row.active"> inactive </span>
          </span>
        </td>
        <td data-title="'Chỉnh sửa'">
          <button
            ng-show="MaintenanceCtrl.AuthService.hasPermission('MAINTENANCE', 'MODIFY')"
            type="button"
            class="button button-secondary tiny"
            ui-sref="admin.edit-maintenance({maintenanceId: row.maintenanceId})"
          >
            <i class="fa fa-pencil" aria-hidden="true"></i>
          </button>
        </td>
      </tr>
    </table>
  </div>
</div>

<!-- <modal
  ng-repeat="maintenance in maintenances"
  show="maintenances[$index].showModal"
  modalId="{{maintenance.id}}"
>
  <table class="default">
    <thead>
      <tr>
        <th>ID</th>
        <th>Mã sản phẩm/th>
        <th>Ngày đến</th>
        <th>Thời gian</th>
        <th>Trung tâm bảo hành</th>
        <th>Phí bảo trì</th>
        <th>Trạng thái thanh toán</th>
        <th>Tên khách hàng</th>
        <th>Số điện thoại</th>
      </tr>
    </thead>
  </table>
</modal> -->
